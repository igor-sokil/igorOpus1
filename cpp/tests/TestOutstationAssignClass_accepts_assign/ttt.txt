TEST_CASE(SUITE("accepts assign class via all objects header"))
//принимает присвоенный класс через заголовок всех объектов
{
    OutstationTestObject t(OutstationConfig(), configure::by_count_of::binary_input(5));
    t.application->supportsAssignClass = true;
    t.LowerLayerUp();

    // assign binaries to class 2
    t.SendToOutstation("C0 16 3C 03 06 01 00 06");
    REQUIRE(t.lower->PopWriteAsHex() == "C0 81 80 00");

    REQUIRE(t.application->classAssignments.size() == 1);
    auto assignment = t.application->classAssignments.front();
    REQUIRE(assignment == std::make_tuple(AssignClassType::BinaryInput, PointClass::Class2, 0, 4));
}
